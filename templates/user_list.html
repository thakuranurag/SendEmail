<html>


<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="/static/materialize/css/materialize.min.css"  media="screen,projection"/>
<link type="text/css" rel="stylesheet" href="/static/materialize/css/colour.css"  media="screen,projection"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<script type="text/javascript" src="/static/js/jquery-2.1.1.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>



<head>

<center>	<H3>Here is the list of users</H3>  </center>

<link rel="stylesheet" href="static/show_expences.css" />


<script type="text/javascript">

/*function data()
{

	alert("hello");
}
*/



 $(document).ready(function() {

    

	  var response_data={{list_array|safe}};


	  for(var i=0;i<response_data.length;i++){

		var table_row =''

		table_row+='<tr><td>'+response_data[i].name+'</td>'
		table_row+='<td>'+response_data[i].phone+'</td>'
		table_row+='<td>'+response_data[i].email+'</td>'
    table_row+='<td>'+response_data[i].date+'</td>'
    table_row+='<td><input type="checkbox" id="'+i+'"/><label for="'+i+'"</label></td></tr>'
	  $("#table1").append(table_row);
     


document.getElementById("table1");

}


 });


</script>




<script language="javascript" type="text/javascript">
            


            function exefunction(){

              var response_data={{list_array|safe}};

              var checkarray=[];

              for (var i = 0; i < response_data.length; i++) {

                if (document.getElementById(i).checked) {

                  checkarray[i]= -1;

                };
                
              };

              var emails = [];


             for(var i=0;i<response_data.length;i++) {

                
                if (checkarray[i]==-1) {
                      // emails.emailArray.push({ 
                      // "name" : item.name,
                      // "email"  : item.email,
                      emails.push(response_data[i].email),


                      alert(emails);                 



                };


              };


                alert(emails);
               

               $.ajax({
                  url: "//127.0.0.1:8000/mails/",
                  type: "GET",
                  data: {demo: JSON.stringify(emails)},
                  dataType: "json",
                  success: function(data){
                  alert(data);
        }

    });



                            
                
            }
        </script>






</head>
<form method="POST" action="#" >

<div>

     <div class="row" >
        <div class="col s12 m2"></div>
        <div class="col s12 m8">
          <div class="card white darken-1" background-color="#FFD700" >
            <div class="card-content black-text">
         <ul class="collection with-header">


<input type="date" name="start">
<input type="date" name="deadline">



</div>
</div>
</div>
</div>
</div>
</ul>
        <center>  <button class="btn" type= "submit" name="submit" onclick="showFilteredData()"  >Show Users</button> </center>
</form>
<center>  <button  onclick="showdata()"  >Show All Users</button> </center>
<!-- BELOW IS THE CODE FOR CARD -->



<!-- 
<div>

     <div class="row" >
        <div class="col s12 m2"></div>
        <div class="col s12 m8">
          <div class="card white darken-1" background-color="#FFD700" >
            <div class="card-content black-text">
         <ul class="collection with-header">
            <center>
               <li class="collection-header"><h5 id="order_placed">Expences</h5></li>        
            </center>    
            <form>
            <input type="date" name="start_date">
            <input type="date" name="end_date">
             <center><a class=" waves-effect waves-light btn" id="show" onclick=showdata() name="show">Show Details</a>
<br><br>
            </form>
          </ul>
      </div>
    </div>
  </div>
</div>  
 -->


<!-- Card is here -->



<!-- Table is created here  -->
<body>

<table id = "table1"  class = "striped">
    <thead>
          <tr>
              <th data-field="name">Name</th>
              <th data-field="phone">Contact</th>
              <th data-field="email">Email</th>
              <th data-field="date">Date</th>
          </tr>
        </thead>

 </table>


<div id="divfix">
 
    
   



<form method="GET" action="/mails/" id="jsonEmail">

<center>  <button type="submit" name ="submit" onclick="exefunction()" >Send mail</button> </center>

</form>

 
</div>

</body>

</html>